(function(a){a.fn.shuffle=function(){return this.each(function(){var b=a(this).children();return(b.length)?a(this).html(a.shuffle(b)):this})};a.shuffle=function(c){for(var d,b,e=c.length;e;d=parseInt(Math.random()*e),b=c[--e],c[e]=c[d],c[d]=b){}return c}})(jQuery);function suitUp(a){$("link[rel=stylesheet]").attr({href:a})}function notefy(b,e,f,d,c){if(f!=false){var a=f}else{var a="notefy"}if(d!="stick"){$.jGrowl(e,{header:b,icon_theme:a,sticky:false})}else{$.jGrowl(e,{header:b,icon_theme:a,sticky:true})}}(function(j){function a(){var d=j("script:first"),f=d.css("color"),h=false;if(/^rgba/.test(f)){h=true}else{try{h=f!=d.css("color","rgba(0, 0, 0, 0.5)").css("color");d.css("color",f)}catch(g){}}return h}function c(d,f,h){var g="rgb"+(j.support.rgba?"a":"")+"("+parseInt(d[0]+h*(f[0]-d[0]),10)+","+parseInt(d[1]+h*(f[1]-d[1]),10)+","+parseInt(d[2]+h*(f[2]-d[2]),10);if(j.support.rgba){g+=","+(d&&f?parseFloat(d[3]+h*(f[3]-d[3])):1)}g+=")";return g}function e(d){var f,g;if(f=/#([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})/.exec(d)){g=[parseInt(f[1],16),parseInt(f[2],16),parseInt(f[3],16),1]}else{if(f=/#([0-9a-fA-F])([0-9a-fA-F])([0-9a-fA-F])/.exec(d)){g=[parseInt(f[1],16)*17,parseInt(f[2],16)*17,parseInt(f[3],16)*17,1]}else{if(f=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(d)){g=[parseInt(f[1]),parseInt(f[2]),parseInt(f[3]),1]}else{if(f=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9\.]*)\s*\)/.exec(d)){g=[parseInt(f[1],10),parseInt(f[2],10),parseInt(f[3],10),parseFloat(f[4])]}}}}return g}j.extend(true,j,{support:{rgba:a()}});var b=["color","backgroundColor","borderBottomColor","borderLeftColor","borderRightColor","borderTopColor","outlineColor"];j.each(b,function(d,f){j.fx.step[f]=function(g){if(!g.init){g.a=e(j(g.elem).css(f));g.end=e(g.end);g.init=true}g.elem.style[f]=c(g.a,g.end,g.pos)}});j.fx.step.borderColor=function(d){if(!d.init){d.end=e(d.end)}var f=b.slice(2,6);j.each(f,function(h,g){d.init||(d[g]={a:e(j(d.elem).css(g))});d.elem.style[g]=c(d[g].a,d.end,d.pos)});d.init=true}})(jQuery);(function(a){a.jGrowl=function(b,c){if(a("#jGrowl").size()==0){a('<div id="jGrowl"></div>').addClass((c&&c.position)?c.position:a.jGrowl.defaults.position).appendTo("body")}a("#jGrowl").jGrowl(b,c)};a.fn.jGrowl=function(b,d){if(a.isFunction(this.each)){var c=arguments;return this.each(function(){var e=this;if(a(this).data("jGrowl.instance")==undefined){a(this).data("jGrowl.instance",a.extend(new a.fn.jGrowl(),{notifications:[],element:null,interval:null}));a(this).data("jGrowl.instance").startup(this)}if(a.isFunction(a(this).data("jGrowl.instance")[b])){a(this).data("jGrowl.instance")[b].apply(a(this).data("jGrowl.instance"),a.makeArray(c).slice(1))}else{a(this).data("jGrowl.instance").create(b,d)}})}};a.extend(a.fn.jGrowl.prototype,{defaults:{pool:0,header:"",group:"",sticky:false,position:"top-left",glue:"after",theme:"default",icon_theme:"notefy",themeState:"highlight",corners:"3px",check:250,life:3000,closeDuration:"normal",openDuration:"normal",easing:"swing",closer:true,closeTemplate:"&times;",closerTemplate:"<div>[ close all ]</div>",log:function(c,b,d){},beforeOpen:function(c,b,d){},afterOpen:function(c,b,d){},open:function(c,b,d){},beforeClose:function(c,b,d){},close:function(c,b,d){},animateOpen:{opacity:"show"},animateClose:{opacity:"hide"}},notifications:[],element:null,interval:null,create:function(b,c){var c=a.extend({},this.defaults,c);if(typeof c.speed!=="undefined"){c.openDuration=c.speed;c.closeDuration=c.speed}this.notifications.push({message:b,options:c});c.log.apply(this.element,[this.element,b,c])},render:function(d){var b=this;var c=d.message;var e=d.options;var d=a('<div class="jGrowl-notification '+e.themeState+" ui-corner-all"+((e.group!=undefined&&e.group!="")?" "+e.group:"")+'"><div class="hui-icon-'+e.icon_theme+'"></div><div class="jGrowl-close">'+e.closeTemplate+'</div><div class="jGrowl-header">'+e.header+'</div><div class="jGrowl-message">'+c+"</div></div>").data("jGrowl",e).addClass(e.theme).children("div.jGrowl-close").bind("click.jGrowl",function(){a(this).parent().trigger("jGrowl.close")}).parent();a(d).bind("mouseover.jGrowl",function(){a("div.jGrowl-notification",b.element).data("jGrowl.pause",true)}).bind("mouseout.jGrowl",function(){a("div.jGrowl-notification",b.element).data("jGrowl.pause",false)}).bind("jGrowl.beforeOpen",function(){if(e.beforeOpen.apply(d,[d,c,e,b.element])!=false){a(this).trigger("jGrowl.open")}}).bind("jGrowl.open",function(){if(e.open.apply(d,[d,c,e,b.element])!=false){if(e.glue=="after"){a("div.jGrowl-notification:last",b.element).after(d)}else{a("div.jGrowl-notification:first",b.element).before(d)}a(this).animate(e.animateOpen,e.openDuration,e.easing,function(){if(a.browser.msie&&(parseInt(a(this).css("opacity"),10)===1||parseInt(a(this).css("opacity"),10)===0)){this.style.removeAttribute("filter")}a(this).data("jGrowl").created=new Date();a(this).trigger("jGrowl.afterOpen")})}}).bind("jGrowl.afterOpen",function(){e.afterOpen.apply(d,[d,c,e,b.element])}).bind("jGrowl.beforeClose",function(){if(e.beforeClose.apply(d,[d,c,e,b.element])!=false){a(this).trigger("jGrowl.close")}}).bind("jGrowl.close",function(){a(this).data("jGrowl.pause",true);a(this).animate(e.animateClose,e.closeDuration,e.easing,function(){a(this).remove();var f=e.close.apply(d,[d,c,e,b.element]);if(a.isFunction(f)){f.apply(d,[d,c,e,b.element])}})}).trigger("jGrowl.beforeOpen");if(e.corners!=""&&a.fn.corner!=undefined){a(d).corner(e.corners)}if(a("div.jGrowl-notification:parent",b.element).size()>1&&a("div.jGrowl-closer",b.element).size()==0&&this.defaults.closer!=false){a(this.defaults.closerTemplate).addClass("jGrowl-closer ui-state-highlight ui-corner-all").addClass(this.defaults.theme).appendTo(b.element).animate(this.defaults.animateOpen,this.defaults.speed,this.defaults.easing).bind("click.jGrowl",function(){a(this).siblings().trigger("jGrowl.beforeClose");if(a.isFunction(b.defaults.closer)){b.defaults.closer.apply(a(this).parent()[0],[a(this).parent()[0]])}})}},update:function(){a(this.element).find("div.jGrowl-notification:parent").each(function(){if(a(this).data("jGrowl")!=undefined&&a(this).data("jGrowl").created!=undefined&&(a(this).data("jGrowl").created.getTime()+parseInt(a(this).data("jGrowl").life))<(new Date()).getTime()&&a(this).data("jGrowl").sticky!=true&&(a(this).data("jGrowl.pause")==undefined||a(this).data("jGrowl.pause")!=true)){a(this).trigger("jGrowl.beforeClose")}});if(this.notifications.length>0&&(this.defaults.pool==0||a(this.element).find("div.jGrowl-notification:parent").size()<this.defaults.pool)){this.render(this.notifications.shift())}if(a(this.element).find("div.jGrowl-notification:parent").size()<2){a(this.element).find("div.jGrowl-closer").animate(this.defaults.animateClose,this.defaults.speed,this.defaults.easing,function(){a(this).remove()})}},startup:function(b){this.element=a(b).addClass("jGrowl").append('<div class="jGrowl-notification"></div>');this.interval=setInterval(function(){a(b).data("jGrowl.instance").update()},parseInt(this.defaults.check));if(a.browser.msie&&parseInt(a.browser.version)<7&&!window.XMLHttpRequest){a(this.element).addClass("ie6")}},shutdown:function(){a(this.element).removeClass("jGrowl").find("div.jGrowl-notification").remove();clearInterval(this.interval)},close:function(){a(this.element).find("div.jGrowl-notification").each(function(){a(this).trigger("jGrowl.beforeClose")})}});a.jGrowl.defaults=a.fn.jGrowl.prototype.defaults})(jQuery);jQuery.fn.addOption=function(){if(arguments.length==0){return this}var b=true;var a=false;if(typeof arguments[0]=="object"){a=true;var c=arguments[0]}if(arguments.length>=2){if(typeof arguments[1]=="boolean"){b=arguments[1]}else{if(typeof arguments[2]=="boolean"){b=arguments[2]}}if(!a){var d=arguments[0];var e=arguments[1]}}this.each(function(){if(this.nodeName.toLowerCase()!="select"){return}if(a){for(var f in c){jQuery(this).addOption(f,c[f],b)}}else{var g=document.createElement("option");g.value=d;g.text=e;this.options.add(g)}if(b){this.options[this.options.length-1].selected=true}});return this};jQuery.fn.removeOption=function(){if(arguments.length==0){return this}if(typeof arguments[0]=="string"){var b=arguments[0]}else{if(typeof arguments[0]=="number"){var a=arguments[0]}else{return this}}this.each(function(){if(this.nodeName.toLowerCase()!="select"){return}if(b){var c=this.options.length;for(var d=c-1;d>=0;d--){if(this.options[d].value==b){this.options[d]=null}}}else{this.remove(a)}});return this};jQuery.fn.sortOptions=function(a){this.each(function(){if(this.nodeName.toLowerCase()!="select"){return}a=typeof a=="undefined"?true:a;var b=this.options.length;var d=[];for(var c=0;c<b;c++){d[c]={value:this.options[c].value,text:this.options[c].text}}d.sort(function(f,e){option1text=f.text.toLowerCase();option2text=e.text.toLowerCase();if(option1text==option2text){return 0}if(a){return option1text<option2text?-1:1}else{return option1text>option2text?-1:1}});for(var c=0;c<b;c++){this.options[c].text=d[c].text;this.options[c].value=d[c].value}});return this};jQuery.fn.selectOptions=function(a){this.each(function(){if(this.nodeName.toLowerCase()!="select"){return}var b=this.options.length;for(var c=0;c<b;c++){if(this.options[c].value==a){this.options[c].selected=true}}});return this};
/*!
// iPhone-style Checkboxes jQuery plugin
// Copyright Thomas Reynolds, licensed GPL & MIT
*/
(function(){var a;var b=Array.prototype.slice;a=(function(){function c(g,d){var e,f,h;this.elem=$(g);f=$.extend({},c.defaults,d);for(e in f){h=f[e];this[e]=h}this.elem.data(this.dataName,this);this.wrapCheckboxWithDivs();this.attachEvents();this.disableTextSelection();if(this.resizeHandle){this.optionallyResize("handle")}if(this.resizeContainer){this.optionallyResize("container")}this.initialPosition()}c.prototype.isDisabled=function(){return this.elem.is(":disabled")};c.prototype.wrapCheckboxWithDivs=function(){this.elem.wrap("<div class='"+this.containerClass+"' />");this.container=this.elem.parent();this.offLabel=$("<label class='"+this.labelOffClass+"'>\n  <span>"+this.uncheckedLabel+"</span>\n</label>").appendTo(this.container);this.offSpan=this.offLabel.children("span");this.onLabel=$("<label class='"+this.labelOnClass+"'>\n  <span>"+this.checkedLabel+"</span>\n</label>").appendTo(this.container);this.onSpan=this.onLabel.children("span");return this.handle=$("<div class='"+this.handleClass+"'>\n  <div class='"+this.handleRightClass+"'>\n    <div class='"+this.handleCenterClass+"' />\n  </div>\n</div>").appendTo(this.container)};c.prototype.disableTextSelection=function(){if($.browser.msie){return $([this.handle,this.offLabel,this.onLabel,this.container]).attr("unselectable","on")}};c.prototype._getDimension=function(d,e){if($.fn.actual!=null){return d.actual(e)}else{return d[e]()}};c.prototype.optionallyResize=function(g){var f,e,d;d=this._getDimension(this.onLabel,"width");e=this._getDimension(this.offLabel,"width");if(g==="container"){f=d>e?d:e;f+=this._getDimension(this.handle,"width")+this.handleMargin;return this.container.css({width:f})}else{f=d>e?d:e;return this.handle.css({width:f})}};c.prototype.onMouseDown=function(e){var d;e.preventDefault();if(this.isDisabled()){return}d=e.pageX||e.originalEvent.changedTouches[0].pageX;c.currentlyClicking=this.handle;c.dragStartPosition=d;return c.handleLeftOffset=parseInt(this.handle.css("left"),10)||0};c.prototype.onDragMove=function(f,d){var e,g;if(c.currentlyClicking!==this.handle){return}g=(d+c.handleLeftOffset-c.dragStartPosition)/this.rightSide;if(g<0){g=0}if(g>1){g=1}e=g*this.rightSide;this.handle.css({left:e});this.onLabel.css({width:e+this.handleRadius});this.offSpan.css({marginRight:-e});return this.onSpan.css({marginLeft:-(1-g)*this.rightSide})};c.prototype.onDragEnd=function(e,d){var f;if(c.currentlyClicking!==this.handle){return}if(this.isDisabled()){return}if(c.dragging){f=(d-c.dragStartPosition)/this.rightSide;this.elem.prop("checked",f>=0.5)}else{this.elem.prop("checked",!this.elem.prop("checked"))}c.currentlyClicking=null;c.dragging=null;return this.didChange()};c.prototype.refresh=function(){return this.didChange()};c.prototype.didChange=function(){var d;if(typeof this.onChange==="function"){this.onChange(this.elem,this.elem.prop("checked"))}if(this.isDisabled()){this.container.addClass(this.disabledClass);return false}else{this.container.removeClass(this.disabledClass)}d=this.elem.prop("checked")?this.rightSide:0;this.handle.animate({left:d},this.duration);this.onLabel.animate({width:d+this.handleRadius},this.duration);this.offSpan.animate({marginRight:-d},this.duration);return this.onSpan.animate({marginLeft:d-this.rightSide},this.duration)};c.prototype.attachEvents=function(){var f,e,d;d=this;f=function(g){return d.onGlobalMove.apply(d,arguments)};e=function(g){d.onGlobalUp.apply(d,arguments);$(document).unbind("mousemove touchmove",f);return $(document).unbind("mouseup touchend",e)};this.elem.change(function(){return d.refresh()});return this.container.bind("mousedown touchstart",function(g){d.onMouseDown.apply(d,arguments);$(document).bind("mousemove touchmove",f);return $(document).bind("mouseup touchend",e)})};c.prototype.initialPosition=function(){var d,e;d=this._getDimension(this.container,"width");this.offLabel.css({width:d-this.containerRadius});e=this.containerRadius+1;if($.browser.msie&&$.browser.version<7){e-=3}this.rightSide=d-this._getDimension(this.handle,"width")-e;if(this.elem.is(":checked")){this.handle.css({left:this.rightSide});this.onLabel.css({width:this.rightSide+this.handleRadius});this.offSpan.css({marginRight:-this.rightSide})}else{this.onLabel.css({width:0});this.onSpan.css({marginLeft:-this.rightSide})}if(this.isDisabled()){return this.container.addClass(this.disabledClass)}};c.prototype.onGlobalMove=function(e){var d;if(!(!this.isDisabled()&&c.currentlyClicking)){return}e.preventDefault();d=e.pageX||e.originalEvent.changedTouches[0].pageX;if(!c.dragging&&(Math.abs(c.dragStartPosition-d)>this.dragThreshold)){c.dragging=true}return this.onDragMove(e,d)};c.prototype.onGlobalUp=function(e){var d;if(!c.currentlyClicking){return}e.preventDefault();d=e.pageX||e.originalEvent.changedTouches[0].pageX;this.onDragEnd(e,d);return false};c.defaults={duration:200,checkedLabel:"ON",uncheckedLabel:"OFF",resizeHandle:false,resizeContainer:false,disabledClass:"iPhoneCheckDisabled",containerClass:"iPhoneCheckContainer",labelOnClass:"iPhoneCheckLabelOn",labelOffClass:"iPhoneCheckLabelOff",handleClass:"iPhoneCheckHandle",handleCenterClass:"iPhoneCheckHandleCenter",handleRightClass:"iPhoneCheckHandleRight",dragThreshold:5,handleMargin:15,handleRadius:4,containerRadius:5,dataName:"iphoneStyle",onChange:function(){}};return c})();$.iphoneStyle=this.iOSCheckbox=a;$.fn.iphoneStyle=function(){var l,k,d,m,c,h,i,n,j,g,f,e;l=1<=arguments.length?b.call(arguments,0):[];d=(j=(g=l[0])!=null?g.dataName:void 0)!=null?j:a.defaults.dataName;f=this.filter(":checkbox");for(i=0,n=f.length;i<n;i++){k=f[i];m=$(k).data(d);if(m!=null){c=l[0],h=2<=l.length?b.call(l,1):[];if((e=m[c])!=null){e.apply(m,h)}}else{new a(k,l[0])}}return this};$.fn.iOSCheckbox=function(c){var d;if(c==null){c={}}d=$.extend({},c,{resizeHandle:false,disabledClass:"iOSCheckDisabled",containerClass:"iOSCheckContainer",labelOnClass:"iOSCheckLabelOn",labelOffClass:"iOSCheckLabelOff",handleClass:"iOSCheckHandle",handleCenterClass:"iOSCheckHandleCenter",handleRightClass:"iOSCheckHandleRight",dataName:"iOSCheckbox"});return this.iphoneStyle(d)}}).call(this);(function(f){f.facebox=function(m,l){f.facebox.loading(m.settings||[]);if(m.ajax){g(m.ajax,l)}else{if(m.image){c(m.image,l)}else{if(m.div){j(m.div,l)}else{if(f.isFunction(m)){m.call(f)}else{f.facebox.reveal(m,l)}}}}};f.extend(f.facebox,{settings:{opacity:0.2,overlay:true,loadingImage:"http://cloud.ndrigs.com/img/loading.gif",closeImage:"http://cloud.ndrigs.com/img/closelabel.png",imageTypes:["png","jpg","jpeg","gif"],faceboxHtml:'    <div id="facebox" style="display:none;">       <div class="popup">         <div class="content">         </div>         <a href="#" class="close"></a>       </div>     </div>'},loading:function(){k();if(f("#facebox .loading").length==1){return true}e();f("#facebox .content").empty().append('<div class="loading"><img src="'+f.facebox.settings.loadingImage+'"/></div>');f("#facebox").show().css({top:h()[1]+(i()/10),left:f(window).width()/2-(f("#facebox .popup").outerWidth()/2)});f(document).bind("keydown.facebox",function(l){if(l.keyCode==27){f.facebox.close()}return true});f(document).trigger("loading.facebox")},reveal:function(m,l){f(document).trigger("beforeReveal.facebox");if(l){f("#facebox .content").addClass(l)}f("#facebox .content").empty().append(m);f("#facebox .popup").children().fadeIn("normal");f("#facebox").css("left",f(window).width()/2-(f("#facebox .popup").outerWidth()/2));f(document).trigger("reveal.facebox").trigger("afterReveal.facebox")},close:function(){f(document).trigger("close.facebox");return false}});f.fn.facebox=function(l){if(f(this).length==0){return}k(l);function m(){f.facebox.loading(true);var n=this.rel.match(/facebox\[?\.(\w+)\]?/);if(n){n=n[1]}j(this.href,n);return false}return this.bind("click.facebox",m)};function k(n){if(f.facebox.settings.inited){return true}else{f.facebox.settings.inited=true}f(document).trigger("init.facebox");d();var l=f.facebox.settings.imageTypes.join("|");f.facebox.settings.imageTypesRegexp=new RegExp("\\.("+l+")(\\?.*)?$","i");if(n){f.extend(f.facebox.settings,n)}f("body").append(f.facebox.settings.faceboxHtml);var m=[new Image(),new Image()];m[0].src=f.facebox.settings.closeImage;m[1].src=f.facebox.settings.loadingImage;f("#facebox").find(".b:first, .bl").each(function(){m.push(new Image());m.slice(-1).src=f(this).css("background-image").replace(/url\((.+)\)/,"$1")});f("#facebox .close").click(f.facebox.close).append('<img src="'+f.facebox.settings.closeImage+'" class="close_image" title="close">')}function h(){var m,l;if(self.pageYOffset){l=self.pageYOffset;m=self.pageXOffset}else{if(document.documentElement&&document.documentElement.scrollTop){l=document.documentElement.scrollTop;m=document.documentElement.scrollLeft}else{if(document.body){l=document.body.scrollTop;m=document.body.scrollLeft}}}return new Array(m,l)}function i(){var l;if(self.innerHeight){l=self.innerHeight}else{if(document.documentElement&&document.documentElement.clientHeight){l=document.documentElement.clientHeight}else{if(document.body){l=document.body.clientHeight}}}return l}function d(){var l=f.facebox.settings;l.loadingImage=l.loading_image||l.loadingImage;l.closeImage=l.close_image||l.closeImage;l.imageTypes=l.image_types||l.imageTypes;l.faceboxHtml=l.facebox_html||l.faceboxHtml}function j(m,l){if(m.match(/#/)){var n=window.location.href.split("#")[0];var o=m.replace(n,"");if(o=="#"){return}f.facebox.reveal(f(o).html(),l)}else{if(m.match(f.facebox.settings.imageTypesRegexp)){c(m,l)}else{g(m,l)}}}function c(m,l){var n=new Image();n.onload=function(){f.facebox.reveal('<div class="image"><img src="'+n.src+'" /></div>',l)};n.src=m}function g(m,l){f.facebox.jqxhr=f.get(m,function(n){f.facebox.reveal(n,l)})}function b(){return f.facebox.settings.overlay==false||f.facebox.settings.opacity===null}function e(){if(b()){return}if(f("#facebox_overlay").length==0){f("body").append('<div id="facebox_overlay" class="facebox_hide"></div>')}f("#facebox_overlay").hide().addClass("facebox_overlayBG").css("opacity",f.facebox.settings.opacity).click(function(){f(document).trigger("close.facebox")}).fadeIn(200);return false}function a(){if(b()){return}f("#facebox_overlay").fadeOut(200,function(){f("#facebox_overlay").removeClass("facebox_overlayBG");f("#facebox_overlay").addClass("facebox_hide");f("#facebox_overlay").remove()});return false}f(document).bind("close.facebox",function(){if(f.facebox.jqxhr){f.facebox.jqxhr.abort();f.facebox.jqxhr=null}f(document).unbind("keydown.facebox");f("#facebox").fadeOut(function(){f("#facebox .content").removeClass().addClass("content");f("#facebox .loading").remove();f(document).trigger("afterClose.facebox")});a()})})(jQuery);(function(a){a.fn.tipTip=function(c){var g={activation:"hover",keepAlive:false,maxWidth:"200px",edgeOffset:3,defaultPosition:"bottom",delay:400,fadeIn:200,fadeOut:200,attribute:"title",content:false,enter:function(){},exit:function(){}};var e=a.extend(g,c);if(a("#tiptip_holder").length<=0){var b=a('<div id="tiptip_holder" style="max-width:'+e.maxWidth+';"></div>');var d=a('<div id="tiptip_content"></div>');var f=a('<div id="tiptip_arrow"></div>');a("body").append(b.html(d).prepend(f.html('<div id="tiptip_arrow_inner"></div>')))}else{var b=a("#tiptip_holder");var d=a("#tiptip_content");var f=a("#tiptip_arrow")}return this.each(function(){var i=a(this);if(e.content){var l=e.content}else{var l=i.attr(e.attribute)}if(l!=""){if(!e.content){i.removeAttr(e.attribute)}var h=false;if(e.activation=="hover"){i.hover(function(){k()},function(){if(!e.keepAlive){j()}});if(e.keepAlive){b.hover(function(){},function(){j()})}}else{if(e.activation=="focus"){i.focus(function(){k()}).blur(function(){j()})}else{if(e.activation=="click"){i.click(function(){k();return false}).hover(function(){},function(){if(!e.keepAlive){j()}});if(e.keepAlive){b.hover(function(){},function(){j()})}}}}function k(){e.enter.call(this);d.html(l);b.hide().removeAttr("class").css("margin","0");f.removeAttr("style");var y=parseInt(i.offset()["top"]);var p=parseInt(i.offset()["left"]);var v=parseInt(i.outerWidth());var A=parseInt(i.outerHeight());var x=b.outerWidth();var s=b.outerHeight();var w=Math.round((v-x)/2);var o=Math.round((A-s)/2);var n=Math.round(p+w);var m=Math.round(y+A+e.edgeOffset);var t="";var C="";var u=Math.round(x-12)/2;if(e.defaultPosition=="bottom"){t="_bottom"}else{if(e.defaultPosition=="top"){t="_top"}else{if(e.defaultPosition=="left"){t="_left"}else{if(e.defaultPosition=="right"){t="_right"}}}}var r=(w+p)<parseInt(a(window).scrollLeft());var q=(x+p)>parseInt(a(window).width());if((r&&w<0)||(t=="_right"&&!q)||(t=="_left"&&p<(x+e.edgeOffset+5))){t="_right";C=Math.round(s-13)/2;u=-12;n=Math.round(p+v+e.edgeOffset);m=Math.round(y+o)}else{if((q&&w<0)||(t=="_left"&&!r)){t="_left";C=Math.round(s-13)/2;u=Math.round(x);n=Math.round(p-(x+e.edgeOffset+5));m=Math.round(y+o)}}var z=(y+A+e.edgeOffset+s+8)>parseInt(a(window).height()+a(window).scrollTop());var B=((y+A)-(e.edgeOffset+s+8))<0;if(z||(t=="_bottom"&&z)||(t=="_top"&&!B)){if(t=="_top"||t=="_bottom"){t="_top"}else{t=t+"_top"}C=s;m=Math.round(y-(s+5+e.edgeOffset))}else{if(B|(t=="_top"&&B)||(t=="_bottom"&&!z)){if(t=="_top"||t=="_bottom"){t="_bottom"}else{t=t+"_bottom"}C=-12;m=Math.round(y+A+e.edgeOffset)}}if(t=="_right_top"||t=="_left_top"){m=m+5}else{if(t=="_right_bottom"||t=="_left_bottom"){m=m-5}}if(t=="_left_top"||t=="_left_bottom"){n=n+5}f.css({"margin-left":u+"px","margin-top":C+"px"});b.css({"margin-left":n+"px","margin-top":m+"px"}).attr("class","tip"+t);if(h){clearTimeout(h)}h=setTimeout(function(){b.stop(true,true).fadeIn(e.fadeIn)},e.delay)}function j(){e.exit.call(this);if(h){clearTimeout(h)}b.fadeOut(e.fadeOut)}}})}})(jQuery);(function(b){var f=100;var d=[];var e=[];var a=0;function c(k){var q=this;var r={id:"",title:"",parentElement:"body",width:300,height:200,posx:50,posy:50,fixed:true,marginTop:10,marginRight:10,marginBottom:10,marginLeft:10,onDragStart:null,onDragEnd:null,onResizeStart:null,onResizeEnd:null,onUpdate:null,onClose:null,onMaximise:null,onRestore:null,onMinimise:null,statusBar:true,refreshButton:false,minimiseButton:true,maximiseButton:true,closeButton:true,draggable:true,resizeable:true,type:"iframe",url:"",modal:false,tabs:false};b.extend(r,k);this.get=function(s){return r[s]};var g={minimised:false,maximised:false,hidden:true,focus:false};var o={parentElement:b(r.parentElement),modalBackground:b('<div class="jWindow-modalBackground"></div>').css({zIndex:10000,position:"fixed",top:"0",left:"0",width:"100%",height:"100%"}),container:b('<div id="'+r.id+'" class="jWindow"></div>').css({position:(r.fixed)?"fixed":"absolute",width:r.width+"px",top:r.posy+"px",left:r.posx+"px",overflow:"hidden"}),titleBar:b('<div class="jWindow-titleBar"></div>').css({position:"relative",overflow:"hidden"}),title:b('<div class="jWindow-title"></div>').text(r.title),refreshButton:b('<div class="jWindow-button jWindow-refreshButton"></div>'),minimiseButton:b('<div class="jWindow-button jWindow-minimiseButton"></div>'),maximiseButton:b('<div class="jWindow-button jWindow-maximiseButton"></div>'),closeButton:b('<div class="jWindow-button jWindow-closeButton"></div>'),tabsBar:b('<div class="jWindow-tabsBar"></div>').css({position:"relative",overflow:"hidden"}),tabs:b('<ul class="jWindow-tabs"></ul>'),wrapper:b('<div class="jWindow-wrapper"></div>').css({overflow:"hidden"}),content:b('<div class="jWindow-content"></div>').css({height:r.height+"px"}),statusBar:b('<div class="jWindow-statusBar"></div>').css({position:"relative"}),resizeIcon:b('<div class="jWindow-resizeIcon"></div>').css({position:"absolute",bottom:"0",right:"0"}),iframeCover:b('<div class="jWindow-iframeCover"></div>').css({position:"absolute",width:"100%",height:"100%",zIndex:10002}),output:null};o.container.appendTo(o.modalBackground);o.titleBar.appendTo(o.container);o.tabs.appendTo(o.tabsBar);if(r.tabs){o.tabsBar.appendTo(o.wrapper)}o.content.appendTo(o.wrapper);if(r.statusBar){o.statusBar.appendTo(o.wrapper)}o.wrapper.appendTo(o.container);o.title.appendTo(o.titleBar);if(r.refreshButton){o.refreshButton.appendTo(o.titleBar)}if(r.minimiseButton){o.minimiseButton.appendTo(o.titleBar)}if(r.maximiseButton){o.maximiseButton.appendTo(o.titleBar)}if(r.closeButton){o.closeButton.appendTo(o.titleBar)}if(r.modal){o.output=o.modalBackground;o.container.css("zIndex",10001)}else{o.output=o.container.css("zIndex",++f)}o.output.css({opacity:"0"});b.each(o,function(){b(this).on({mousedown:function(){q.focus()}})});o.closeButton.on({click:function(){q.hide(r.onClose)}});o.minimiseButton.on({click:function(){if(o.container.hasClass("minimised")){q.restore({type:"min",complete:r.onRestore})}else{q.minimise(r.onMinimise)}}});o.maximiseButton.on({click:function(s){if(o.container.hasClass("maximised")){q.restore({type:"max",complete:r.onRestore})}else{q.maximise(r.onMaximise)}}});o.refreshButton.on({click:function(){if(r.type!="custom"){q.refresh()}}});o.titleBar.on({dblclick:function(){if(o.container.hasClass("maximised")){q.restore({type:"max",complete:r.onRestore})}else{q.maximise(r.onMaximise)}}});o.content.on({jWindowCover:function(){o.iframeCover.prependTo(o.content)},jWindowUncover:function(){o.iframeCover.detach()}});b(window).resize(function(){if(this.resizeTO){clearTimeout(this.resizeTO)}this.resizeTO=setTimeout(function(){b(this).trigger("resizeEnd")},1000)}).on({resizeEnd:function(){for(var s=0;s<d.length;++s){d[s].set({})}}});var p=function(){var t=o.container.outerWidth()-r.width;var s=o.container.outerHeight()-r.height;if(o.container.outerWidth()>b(window).width()-r.marginLeft-r.marginRight){r.width=b(window).width()-r.marginLeft-r.marginRight-t}if(o.container.outerHeight()>b(window).height()-r.marginTop-r.marginBottom){r.height=b(window).height()-r.marginTop-r.marginBottom-s}if(r.width<50){r.width=50}if(r.height<0){r.height=0}if(r.posx+o.container.outerWidth()>b(window).width()-r.marginRight){r.posx=b(window).width()-r.marginRight-r.width-t}if(r.posy+o.container.outerHeight()>b(window).height()-r.marginBottom){r.posy=b(window).height()-r.marginBottom-r.height-s}if(r.posx<r.marginLeft){r.posx=r.marginLeft}if(r.posy<r.marginTop){r.posy=r.marginTop}o.container.animate({top:r.posy+"px",left:r.posx+"px",width:r.width+"px"},350,"swing");o.content.animate({height:r.height+"px"},350,"swing")};var h=function(t){if(typeof t=="undefined"||t==undefined){t=true}r.draggable=!!t;var u=0,s=0;var w=0,v=0;if(r.draggable&&!g.maximised){o.titleBar.css("cursor","move").on({mousedown:function(x){u=x.screenX;s=x.screenY;w=r.posx;v=r.posy;o.content.trigger("jWindowCover");b(document).on({mousemove:function(y){if(r.draggable){r.posx=w+y.screenX-u;r.posy=v+y.screenY-s;o.container.css({top:r.posy+"px",left:r.posx+"px"})}},mouseup:function(){b(document).off("mousemove mouseup");o.content.trigger("jWindowUncover");p();if(typeof r.onDragEnd=="function"){r.onDragEnd()}}});if(typeof r.onDragStart=="function"){r.onDragStart()}o.titleBar[0].onselectstart=function(){return false};return false}})}else{o.titleBar.css("cursor","auto").off("mousedown");o.titleBar[0].onselectstart=null}return q};h(r.draggable);var l=function(w){if(typeof w=="undefined"||w==undefined){w=true}r.resizeable=!!w;var t=0,s=0;var u=0,v=0;if(r.resizeable&&!g.maximised&&!g.minimised){o.resizeIcon.appendTo(o.statusBar);o.resizeIcon.css("cursor","se-resize").on({mousedown:function(x){t=x.screenX;s=x.screenY;u=o.container.width();v=o.content.height();o.content.trigger("jWindowCover");b(document).on({mousemove:function(y){if(r.resizeable){r.width=u+y.screenX-t;r.height=v+y.screenY-s;o.container.css({width:r.width+"px"});o.content.css({height:r.height+"px"})}},mouseup:function(y){b(document).off("mousemove mouseup");o.content.trigger("jWindowUncover");p();if(typeof r.onResizeEnd=="function"){r.onResizeEnd()}}});if(typeof r.onResizeStart=="function"){r.onResizeStart()}o.resizeIcon[0].onselectstart=function(){return false};return false}})}else{o.resizeIcon.detach();o.resizeIcon.css("cursor","auto").off("mousedown");o.resizeIcon[0].onselectstart=null}return q};l(r.resizeable);var n=function(){var s=false;do{var t=e.pop();console.log("popped: "+t);console.log(e);if(!d[t].isHidden()){d[t].focus();s=true}}while(!s&&e.length>0);return q};q.show=function(t){if(!g.hidden){return q}var s={duration:350,easing:"linear",complete:function(){}};switch(typeof t){case"number":s.duration=t;break;case"string":s.easing=t;break;case"function":s.complete=t;break;case"object":b.extend(s,t);break}o.parentElement.append(o.output.css({top:"+=15px"}));o.output.animate({opacity:"1",top:"-=15px"},s.duration,s.easing,s.complete);g.hidden=false;q.focus();return q};q.hide=function(t){if(g.hidden){return q}var s={duration:350,easing:"linear",complete:function(){}};switch(typeof t){case"number":s.duration=t;break;case"string":s.easing=t;break;case"function":s.complete=t;break;case"object":b.extend(s,t);break}o.output.animate({top:"-=15px",opacity:"0"},s.duration,s.easing,function(){o.output=o.output.css({top:"+=15px"}).detach();s.complete()});g.hidden=true;q.focus(false);n();return q};q.isHidden=function(){return g.hidden};q.minimise=function(t){if(g.minimised){return q}var s={duration:350,easing:"linear",complete:function(){}};switch(typeof t){case"number":s.duration=t;break;case"string":s.easing=t;break;case"function":s.complete=t;break;case"object":b.extend(s,t);break}o.wrapper.slideUp(s.duration,s.easing,s.complete);o.container.addClass("minimised");g.minimised=true;l(r.resizeable);return q};q.maximise=function(v){if(g.maximised){return q}var s={duration:350,easing:"linear",complete:function(){}};switch(typeof v){case"number":s.duration=v;break;case"string":s.easing=v;break;case"function":s.complete=v;break;case"object":b.extend(s,v);break}var t=b(window).width()-r.marginLeft-r.marginRight;var u=b(window).height()-r.marginTop-r.marginBottom-(o.container.outerHeight()-o.content.height());o.container.animate({width:t+"px",top:r.marginTop+"px",left:r.marginLeft+"px"},s.duration,s.easing,s.complete);o.content.animate({height:u+"px"},s.duration,s.easing);o.container.addClass("maximised");g.maximised=true;l(r.resizeable);h(r.draggable);return q};q.restore=function(t){if(!g.minimised&&!g.maximised){return q}var s={duration:350,easing:"linear",complete:function(){},type:"both"};switch(typeof t){case"number":s.duration=t;break;case"string":s.easing=t;break;case"function":s.complete=t;break;case"object":b.extend(s,t);break}if(o.container.hasClass("minimised")&&b.inArray(s.type,["min","both"])!=-1){o.wrapper.slideDown(s.duration,s.easing,s.complete);o.container.removeClass("minimised");g.minimised=false}if(o.container.hasClass("maximised")&&b.inArray(s.type,["max","both"])!=-1){o.container.animate({width:r.width+"px",top:r.posy+"px",left:r.posx+"px"},s.duration,s.easing,s.complete);o.content.animate({height:r.height+"px"},s.duration,s.easing);o.container.removeClass("maximised");g.maximised=false}l(r.resizeable);h(r.draggable);return q};q.focus=function(s){if(typeof s=="undefined"||s==undefined){s=true}s=!!s;if(g.focus==s){return q}if(s){for(var t=0;t<d.length;++t){if(d[t].hasFocus()){d[t].focus(false);e.push(t);console.log(e)}}o.container.removeClass("blur").addClass("focus");o.content.trigger("jWindowUncover");g.focus=true;if(r.modal){o.container.css("zIndex","10001")}else{o.container.css("zIndex",++f)}}else{if(!r.modal){o.container.removeClass("focus").addClass("blur");o.content.trigger("jWindowCover");g.focus=false}}return q};q.hasFocus=function(){return g.focus};q.update=function(t){if(t===null){r.url=null;o.content.empty()}else{if(r.type=="iframe"){if(typeof t=="string"){r.url=t;o.content.html('<iframe src="'+r.url+'" />').find("iframe").css({border:"0",width:"100%",height:"100%"})}else{var s=o.content.find("iframe");if(s.length>0){if(r.url.length==0){r.url=s[0].src}else{s[0].src=r.url}}else{if(r.url.length>0){o.content.html('<iframe src="'+r.url+'" />').find("iframe").css({border:"0",width:"100%",height:"100%"})}}}}else{if(r.type=="ajax"){if(typeof t=="string"){r.url=t}b.ajax({url:r.url,dataType:"html",success:function(u){o.content.html('<div style="padding: 1px; margin: -1px;">'+u+"</div>")}})}else{o.content.html('<div style="padding: 1px; margin: -1px;">'+t+"</div>")}}}return q};q.refresh=function(){if(r.type=="iframe"){o.content.find("iframe").get(0).contentWindow.location.reload()}return q};q.set=function(u,t){if(typeof u=="string"){var s={};s[u]=t;u=s}if(typeof u!="object"){u={}}b.each(u,function(x,w){switch(x){case"title":r.title=w;o.title.text(r.title);break;case"posx":r.posx=w;o.container.css({left:r.posx+"px"});break;case"posy":r.posy=w;o.container.css({top:r.posy+"px"});break;case"width":r.width=w;o.container.css({width:r.width+"px"});break;case"height":r.height=w;o.content.css({height:r.height+"px"});break;case"resizeable":r.resizeable=w;l(r.resizeable);break;case"draggable":r.draggable=w;h(r.draggable);break;case"onDragStart":case"onDragEnd":case"onResizeStart":case"onResizeEnd":case"onUpdate":case"onClose":case"onMaximise":case"onRestore":case"onMinimise":case"url":r[x]=w;break;case"tabs":var v=r.tabs;r.tabs=!!w;if(r.tabs!=v){if(r.tabs){b.each(m,function(y,z){if(r.url==z.href){z.active(true,false)}});o.tabsBar.prependTo(o.wrapper)}else{o.tabsBar.detach()}}break;default:console.log('Cannot set "'+x+'".');break}});p();return q};var m=[];function j(u){if(typeof u.href=="undefined"||typeof u.title=="undefined"){throw"Missing parametres!"}var t=this;t.href=u.href;t.title=u.title;var s=false;var v=a++;t.name=(typeof u.name!="undefined")?u.name:null;t.getId=function(){return v};t.active=function(w,x){if(typeof w!="undefined"){w=!!w;x=(typeof x!="undefined")?!!x:false;if(s&&!w&&x){q.update(null)}if(!s&&w&&x){q.update(t.href)}s=w;if(w){t.domNode.addClass("active")}else{t.domNode.removeClass("active")}}return s};t.domNode=b('<li class="jWindow-tab">'+t.title+"</li>").css({display:"inline-block",cursor:"pointer"}).on({click:function(w){w.preventDefault();t.domNode.trigger("jWindowOpenTab")},jWindowOpenTab:function(){b.each(m,function(w,x){x.active(false)});t.active(true,true)},jWindowCloseTab:function(){t.domNode.detach();t.active(false,true);var w=0;b.each(m,function(x,y){console.log(y.getId());if(y.getId()==v){w=x}});m.splice(w,1)}})}var i=function(t){var s=true;if(typeof t.name!="undefined"&&t!==null){b.each(m,function(u,v){if(v.name==t.name){console.log("Tab name must be unique.");s=false}})}return s};q.appendTab=function(u){if(i(u)){var s=new j(u);m.push(s);s.domNode.appendTo(o.tabs)}return q};q.prependTab=function(v){if(i(v)){var u=m;var s=new j(v);b.each(m,function(t,w){w.domNode.detach()});m=[s];b.each(u,function(t,w){m.push(w)});b.each(m,function(t,w){w.domNode.appendTo(o.tabs)})}return q};q.openTab=function(s){if(s===null){return q}b.each(m,function(t,u){if(u.name==s){u.domNode.trigger("jWindowOpenTab")}});return q};q.closeTab=function(s){if(s===null){return q}b.each(m,function(t,u){if(u.name==s){u.domNode.trigger("jWindowCloseTab")}});return q}}b.extend({jWindow:function(k){switch(typeof k){case"string":for(var h=0;h<d.length;++h){if(d[h].get("id")==k){return d[h]}}return null;break;case"object":if(typeof k.id!="string"||k.id.length==0){console.log("An ID is required.")}else{var g=new c(k);var j=b.jWindow(k.id);if(j===null){d.push(g);return g}else{console.log("jWindow id "+k.id+" already exists.");return j}}break;default:console.log("Bad or no parametre!");break}}})})(jQuery);